[gd_scene load_steps=18 format=3 uid="uid://dofn2tm0f68ta"]

[ext_resource type="Script" path="res://scripts/playfield/Ball.gd" id="1_c3ly0"]
[ext_resource type="Script" path="res://scripts/playfield/GameManager.gd" id="1_dewtm"]
[ext_resource type="Script" path="res://scripts/global/Team.gd" id="2_poa4c"]
[ext_resource type="Shader" path="res://shaders/goal.gdshader" id="3_1e5ip"]
[ext_resource type="Script" path="res://scripts/playfield/Paddle.gd" id="4_426oj"]
[ext_resource type="Script" path="res://scripts/playfield/Wall.gd" id="5_28yv7"]

[sub_resource type="CircleShape2D" id="CircleShape2D_45wdc"]
radius = 4.9

[sub_resource type="CircleShape2D" id="CircleShape2D_f1pid"]
radius = 4.9

[sub_resource type="FastNoiseLite" id="FastNoiseLite_b6yav"]

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_gfats"]
noise = SubResource("FastNoiseLite_b6yav")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_rmnr2"]
shader = ExtResource("3_1e5ip")
shader_parameter/density = 0.0
shader_parameter/noiseTexture = SubResource("NoiseTexture2D_gfats")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ebahk"]
size = Vector2(100, 10)

[sub_resource type="CircleShape2D" id="CircleShape2D_i4q0o"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_xlt7b"]
size = Vector2(540, 10)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ytolg"]
size = Vector2(540, 10)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_g6b2f"]
size = Vector2(540, 10)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_8ku6j"]
size = Vector2(351, 10)

[node name="Viewport" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Background" type="ColorRect" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 1)

[node name="Game" type="Control" parent="."]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -480.0
offset_top = -270.0
offset_right = 480.0
offset_bottom = 270.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("1_dewtm")

[node name="PlayField" type="Control" parent="Game"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -480.0
offset_top = -270.0
offset_right = 480.0
offset_bottom = 270.0
grow_horizontal = 2
grow_vertical = 2
pivot_offset = Vector2(480, 270)

[node name="Ball" type="Area2D" parent="Game/PlayField" node_paths=PackedStringArray("shapeCaster")]
position = Vector2(473, 214)
collision_mask = 0
script = ExtResource("1_c3ly0")
shapeCaster = NodePath("ShapeCast2D")

[node name="ColorRect" type="ColorRect" parent="Game/PlayField/Ball"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -5.0
offset_top = -5.0
offset_right = 5.0
offset_bottom = 5.0
grow_horizontal = 2
grow_vertical = 2

[node name="Sprite2D" type="Sprite2D" parent="Game/PlayField/Ball"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Game/PlayField/Ball"]
shape = SubResource("CircleShape2D_45wdc")

[node name="ShapeCast2D" type="ShapeCast2D" parent="Game/PlayField/Ball"]
enabled = false
shape = SubResource("CircleShape2D_f1pid")
target_position = Vector2(0, 5)
collision_mask = 30
collide_with_areas = true
collide_with_bodies = false

[node name="Teams" type="Control" parent="Game/PlayField"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -480.0
offset_top = -270.0
offset_right = 480.0
offset_bottom = 270.0
grow_horizontal = 2
grow_vertical = 2
pivot_offset = Vector2(480, 270)

[node name="Team" type="Control" parent="Game/PlayField/Teams"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -175.5
offset_top = 28.5
offset_right = 175.5
offset_bottom = 270.0
grow_horizontal = 2
grow_vertical = 2
pivot_offset = Vector2(175.5, 0)
script = ExtResource("2_poa4c")

[node name="GoalBorder" type="ColorRect" parent="Game/PlayField/Teams/Team"]
material = SubResource("ShaderMaterial_rmnr2")
layout_mode = 1
anchors_preset = -1
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = -20.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0.25098, 1, 1, 1)

[node name="Goal" type="Area2D" parent="Game/PlayField/Teams/Team"]
position = Vector2(175.5, 241.5)
collision_layer = 4
collision_mask = 0

[node name="GoalCollider" type="CollisionPolygon2D" parent="Game/PlayField/Teams/Team/Goal"]
polygon = PackedVector2Array(-175.5, 0, 175.5, 0, 248.15, 100, -248.15, 100)

[node name="Paddle" type="Area2D" parent="Game/PlayField/Teams/Team"]
position = Vector2(125.5, 231)
collision_layer = 2
collision_mask = 0
script = ExtResource("4_426oj")

[node name="Color" type="ColorRect" parent="Game/PlayField/Teams/Team/Paddle"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 100.0
offset_bottom = 10.0
grow_horizontal = 2
grow_vertical = 2

[node name="TopCollider" type="CollisionShape2D" parent="Game/PlayField/Teams/Team/Paddle"]
position = Vector2(50, 5)
shape = SubResource("RectangleShape2D_ebahk")
one_way_collision_margin = 0.0

[node name="Team2" type="Control" parent="Game/PlayField/Teams"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -175.5
offset_top = 28.5
offset_right = 175.5
offset_bottom = 270.0
grow_horizontal = 2
grow_vertical = 2
rotation = 1.25664
pivot_offset = Vector2(175.5, 0)
script = ExtResource("2_poa4c")

[node name="GoalBorder" type="ColorRect" parent="Game/PlayField/Teams/Team2"]
material = SubResource("ShaderMaterial_rmnr2")
layout_mode = 1
anchors_preset = -1
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = -20.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0.25098, 1, 1, 1)

[node name="Goal" type="Area2D" parent="Game/PlayField/Teams/Team2"]
position = Vector2(175.5, 241.5)
collision_layer = 4

[node name="CollisionPolygon" type="CollisionPolygon2D" parent="Game/PlayField/Teams/Team2/Goal"]
polygon = PackedVector2Array(-175.5, 0, 175.5, 0, 248.15, 100, -248.15, 100)

[node name="Paddle" type="Area2D" parent="Game/PlayField/Teams/Team2"]
position = Vector2(125.5, 231.5)
collision_layer = 2
collision_mask = 0
script = ExtResource("4_426oj")

[node name="Color" type="ColorRect" parent="Game/PlayField/Teams/Team2/Paddle"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 100.0
offset_bottom = 10.0
grow_horizontal = 2
grow_vertical = 2

[node name="TopCollider" type="CollisionShape2D" parent="Game/PlayField/Teams/Team2/Paddle"]
position = Vector2(50, 5)
shape = SubResource("RectangleShape2D_ebahk")
one_way_collision_margin = 0.0

[node name="Team3" type="Control" parent="Game/PlayField/Teams"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -175.5
offset_top = 28.5
offset_right = 175.5
offset_bottom = 270.0
grow_horizontal = 2
grow_vertical = 2
rotation = 2.51327
pivot_offset = Vector2(175.5, 0)
script = ExtResource("2_poa4c")

[node name="GoalBorder" type="ColorRect" parent="Game/PlayField/Teams/Team3"]
material = SubResource("ShaderMaterial_rmnr2")
layout_mode = 1
anchors_preset = -1
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = -20.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0.25098, 1, 1, 1)

[node name="Goal" type="Area2D" parent="Game/PlayField/Teams/Team3"]
position = Vector2(175.5, 241.5)
collision_layer = 4
collision_mask = 0

[node name="CollisionPolygon" type="CollisionPolygon2D" parent="Game/PlayField/Teams/Team3/Goal"]
polygon = PackedVector2Array(-175.5, 0, 175.5, 0, 248.15, 100, -248.15, 100)

[node name="Paddle" type="Area2D" parent="Game/PlayField/Teams/Team3"]
position = Vector2(125.5, 231.5)
collision_layer = 2
collision_mask = 0
script = ExtResource("4_426oj")

[node name="Color" type="ColorRect" parent="Game/PlayField/Teams/Team3/Paddle"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 100.0
offset_bottom = 10.0
grow_horizontal = 2
grow_vertical = 2

[node name="TopCollider" type="CollisionShape2D" parent="Game/PlayField/Teams/Team3/Paddle"]
position = Vector2(50, 5)
shape = SubResource("RectangleShape2D_ebahk")
one_way_collision_margin = 0.0

[node name="Team4" type="Control" parent="Game/PlayField/Teams"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -175.5
offset_top = 28.5
offset_right = 175.5
offset_bottom = 270.0
grow_horizontal = 2
grow_vertical = 2
rotation = 3.76991
pivot_offset = Vector2(175.5, 0)
script = ExtResource("2_poa4c")

[node name="GoalBorder" type="ColorRect" parent="Game/PlayField/Teams/Team4"]
material = SubResource("ShaderMaterial_rmnr2")
layout_mode = 1
anchors_preset = -1
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = -20.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0.25098, 1, 1, 1)

[node name="Goal" type="Area2D" parent="Game/PlayField/Teams/Team4"]
position = Vector2(175.5, 241.5)
collision_layer = 4
collision_mask = 0

[node name="CollisionPolygon" type="CollisionPolygon2D" parent="Game/PlayField/Teams/Team4/Goal"]
polygon = PackedVector2Array(-175.5, 0, 175.5, 0, 248.15, 100, -248.15, 100)

[node name="Paddle" type="Area2D" parent="Game/PlayField/Teams/Team4"]
position = Vector2(125.5, 231.5)
collision_layer = 2
collision_mask = 0
script = ExtResource("4_426oj")

[node name="Color" type="ColorRect" parent="Game/PlayField/Teams/Team4/Paddle"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 100.0
offset_bottom = 10.0
grow_horizontal = 2
grow_vertical = 2

[node name="TopCollider" type="CollisionShape2D" parent="Game/PlayField/Teams/Team4/Paddle"]
position = Vector2(50, 5)
shape = SubResource("RectangleShape2D_ebahk")
one_way_collision_margin = 0.0

[node name="Team5" type="Control" parent="Game/PlayField/Teams"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -175.5
offset_top = 28.5
offset_right = 175.5
offset_bottom = 270.0
grow_horizontal = 2
grow_vertical = 2
rotation = 5.02655
pivot_offset = Vector2(175.5, 0)
script = ExtResource("2_poa4c")

[node name="GoalBorder" type="ColorRect" parent="Game/PlayField/Teams/Team5"]
material = SubResource("ShaderMaterial_rmnr2")
layout_mode = 1
anchors_preset = -1
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = -20.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0.25098, 1, 1, 1)

[node name="Goal" type="Area2D" parent="Game/PlayField/Teams/Team5"]
position = Vector2(175.5, 241.5)
collision_layer = 4
collision_mask = 0

[node name="CollisionPolygon" type="CollisionPolygon2D" parent="Game/PlayField/Teams/Team5/Goal"]
polygon = PackedVector2Array(-175.5, 0, 175.5, 0, 248.15, 100, -248.15, 100)

[node name="Paddle" type="Area2D" parent="Game/PlayField/Teams/Team5"]
position = Vector2(125.5, 231.5)
collision_layer = 2
collision_mask = 0
script = ExtResource("4_426oj")

[node name="Color" type="ColorRect" parent="Game/PlayField/Teams/Team5/Paddle"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 100.0
offset_bottom = 10.0
grow_horizontal = 2
grow_vertical = 2

[node name="TopCollider" type="CollisionShape2D" parent="Game/PlayField/Teams/Team5/Paddle"]
position = Vector2(50, 5)
shape = SubResource("RectangleShape2D_ebahk")
one_way_collision_margin = 0.0

[node name="Bumper5" type="Control" parent="Game/PlayField"]
anchors_preset = 0
offset_left = 480.0
offset_top = 597.0
offset_right = 480.0
offset_bottom = 597.0
rotation = 0.628319
pivot_offset = Vector2(0, -298.5)

[node name="Bumper" type="Area2D" parent="Game/PlayField/Bumper5"]
collision_layer = 8
collision_mask = 0

[node name="Corner" type="Polygon2D" parent="Game/PlayField/Bumper5/Bumper"]
polygon = PackedVector2Array(0, 0, 10, 0, 0, -10)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Game/PlayField/Bumper5/Bumper"]
shape = SubResource("CircleShape2D_i4q0o")

[node name="Bumper3" type="Area2D" parent="Game/PlayField"]
position = Vector2(210, 0)
collision_layer = 8
collision_mask = 0

[node name="Corner" type="Polygon2D" parent="Game/PlayField/Bumper3"]
polygon = PackedVector2Array(0, 0, 10, 0, 0, -10)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Game/PlayField/Bumper3"]
shape = SubResource("CircleShape2D_i4q0o")

[node name="Bumper4" type="Area2D" parent="Game/PlayField"]
position = Vector2(750, 0)
collision_layer = 8
collision_mask = 0

[node name="Corner" type="Polygon2D" parent="Game/PlayField/Bumper4"]
polygon = PackedVector2Array(0, 0, 10, 0, 0, -10)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Game/PlayField/Bumper4"]
shape = SubResource("CircleShape2D_i4q0o")

[node name="Bumper2" type="Area2D" parent="Game/PlayField"]
position = Vector2(750, 540)
collision_layer = 8
collision_mask = 0

[node name="Corner" type="Polygon2D" parent="Game/PlayField/Bumper2"]
polygon = PackedVector2Array(0, 0, 10, 0, 0, -10)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Game/PlayField/Bumper2"]
shape = SubResource("CircleShape2D_i4q0o")

[node name="LeftWall" type="Area2D" parent="Game/PlayField"]
position = Vector2(210, 0)
rotation = 1.5708
collision_layer = 2
collision_mask = 0
script = ExtResource("4_426oj")

[node name="Color" type="ColorRect" parent="Game/PlayField/LeftWall"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 540.0
offset_bottom = 10.0
grow_horizontal = 2
grow_vertical = 2

[node name="TopCollider" type="CollisionShape2D" parent="Game/PlayField/LeftWall"]
position = Vector2(270, 5)
shape = SubResource("RectangleShape2D_xlt7b")
one_way_collision_margin = 0.0

[node name="UpperWall" type="Area2D" parent="Game/PlayField"]
position = Vector2(750, 0)
rotation = 3.14159
collision_layer = 2
collision_mask = 0
script = ExtResource("4_426oj")

[node name="Color" type="ColorRect" parent="Game/PlayField/UpperWall"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 540.0
offset_bottom = 10.0
grow_horizontal = 2
grow_vertical = 2

[node name="TopCollider" type="CollisionShape2D" parent="Game/PlayField/UpperWall"]
position = Vector2(270, 5)
shape = SubResource("RectangleShape2D_ytolg")
one_way_collision_margin = 0.0

[node name="RightWall" type="Area2D" parent="Game/PlayField"]
position = Vector2(750, 540)
rotation = 4.71239
collision_layer = 2
collision_mask = 0
script = ExtResource("4_426oj")

[node name="Color" type="ColorRect" parent="Game/PlayField/RightWall"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 540.0
offset_bottom = 10.0
grow_horizontal = 2
grow_vertical = 2

[node name="TopCollider" type="CollisionShape2D" parent="Game/PlayField/RightWall"]
position = Vector2(270, 5)
shape = SubResource("RectangleShape2D_g6b2f")
one_way_collision_margin = 0.0

[node name="Wall" type="Control" parent="Game/PlayField"]
anchors_preset = 0
offset_left = 480.0
offset_top = 298.5
offset_right = 480.0
offset_bottom = 298.5

[node name="BottomWall" type="Area2D" parent="Game/PlayField/Wall"]
position = Vector2(-175.5, 241.5)
collision_layer = 16
collision_mask = 0
script = ExtResource("5_28yv7")

[node name="Collider" type="CollisionShape2D" parent="Game/PlayField/Wall/BottomWall"]
position = Vector2(175.5, 5)
shape = SubResource("RectangleShape2D_8ku6j")
one_way_collision_margin = 0.0

[node name="LeftScoreboard" type="ColorRect" parent="Game"]
layout_mode = 1
anchors_preset = -1
anchor_bottom = 1.0
offset_right = 210.0
grow_vertical = 2
color = Color(0.400698, 0.400698, 0.400698, 1)

[node name="Team Lives" type="VBoxContainer" parent="Game/LeftScoreboard"]
layout_mode = 1
anchors_preset = 10
anchor_right = 1.0
offset_bottom = 77.0
grow_horizontal = 2

[node name="Title" type="Label" parent="Game/LeftScoreboard/Team Lives"]
layout_mode = 2
theme_override_font_sizes/font_size = 50
text = "Lives"
horizontal_alignment = 1

[node name="TeamLives1" type="Label" parent="Game/LeftScoreboard/Team Lives"]
layout_mode = 2
theme_override_font_sizes/font_size = 24
text = "10"
horizontal_alignment = 1

[node name="RightScoreboard" type="ColorRect" parent="Game"]
layout_mode = 1
anchors_preset = -1
anchor_left = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -210.0
grow_horizontal = 0
grow_vertical = 2
color = Color(0.400698, 0.400698, 0.400698, 1)

[node name="Team Lives" type="VBoxContainer" parent="Game/RightScoreboard"]
layout_mode = 1
anchors_preset = 10
anchor_right = 1.0
offset_bottom = 77.0
grow_horizontal = 2

[node name="Title" type="Label" parent="Game/RightScoreboard/Team Lives"]
layout_mode = 2
theme_override_font_sizes/font_size = 50
text = "Goals"
horizontal_alignment = 1

[node name="TeamLives1" type="Label" parent="Game/RightScoreboard/Team Lives"]
layout_mode = 2
theme_override_font_sizes/font_size = 24
text = "10"
horizontal_alignment = 1

[connection signal="area_entered" from="Game/PlayField/Teams/Team/Goal" to="Game/PlayField/Teams/Team" method="onBallEnterGoal"]
[connection signal="area_exited" from="Game/PlayField/Teams/Team/Goal" to="Game/PlayField/Teams/Team" method="onBallExitGoal"]
[connection signal="area_entered" from="Game/PlayField/Teams/Team2/Goal" to="Game/PlayField/Teams/Team2" method="onBallEnterGoal"]
[connection signal="area_exited" from="Game/PlayField/Teams/Team2/Goal" to="Game/PlayField/Teams/Team2" method="onBallExitGoal"]
